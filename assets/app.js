'use strict';(function(a,b){function c(){l.add('interactive')}function d(){l.remove('interactive')}function e(a,b){function c(){e>=b||(e+=d,e>b&&(e=b),a.textContent=m(e),requestAnimationFrame(c))}var d=Math.ceil(b/30),e=0;requestAnimationFrame(c)}b.accessToken='pk.eyJ1IjoiY2hlZWF1biIsImEiOiJjaXhmb3o3bTEwMDAzMnRudTJuNjh1eXQ1In0.yO6WeKJwx6yIPoVx5aPavQ';var f=new b.Map({container:'map',style:'mapbox://styles/cheeaun/cixol8ezg002g2rqs007w3jmt',maxZoom:14,logoPosition:'top-right',attributionControl:!1,pitchWithRotate:!1,dragRotate:!1,boxZoom:!1,zoom:0.1});f.touchZoomRotate.disableRotation();var g=a.getElementById('info'),h=a.getElementById('info-countries'),i=a.getElementById('info-places'),j=a.getElementById('info-checkins'),k=a.getElementById('countries'),l=a.body.classList;f.on('dragstart',c),f.on('zoomstart',c),k.addEventListener('touchstart',d,!1),k.addEventListener('mouseenter',d),f.on('click',function(){l.toggle('interactive')});var m=function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')};f.addControl(new b.AttributionControl({compact:!0}),'top-right'),f.addControl(new b.NavigationControl,'top-right');f.on('load',function(){fetch('data/checkins.min.geojson').then(function(a){return a.json()}).then(function(c){var d={},g={};e(j,c.features.length),c.features=c.features.filter(function(a){var c=a.properties,e=c.id,f=c.country,h=!g[e];if(h){if(!d[f]){var i=a.properties.cc.toLowerCase();d[f]={cc:i,bounds:new b.LngLatBounds,places_count:0,checkins_count:0}}var j=a.geometry.coordinates;d[f].bounds.extend([j[0],j[1]]),d[f].places_count++,g[e]=!0}return d[f].checkins_count++,h}),e(i,Object.keys(g).length);var l=Object.keys(d).map(function(a){var b=d[a];return{name:a,cc:b.cc,bounds:b.bounds,places_count:b.places_count,checkins_count:b.checkins_count}}),n=l.length;e(h,n),l.sort(function(c,a){return a.checkins_count-c.checkins_count}),l.forEach(function(b){var c=b.cc,d=b.name,e=b.bounds,g=b.checkins_count,h=b.places_count,i=a.createElement('button');i.type='button',i.addEventListener('click',function(){f.fitBounds(e,{padding:150})},!1),i.innerHTML='\n          <img src="data/countries/'+c+'.svg" width="50" height="50" alt=""><br>\n          <b>'+d+'</b>\n          <br>\n          '+m(g)+' check-in'+(1<g?'s':'')+'\n          <br>\n          '+m(h)+' place'+(1<h?'s':'')+'\n        ',k.appendChild(i)}),f.addSource('checkins',{type:'geojson',data:c,cluster:!0,clusterMaxZoom:10,clusterRadius:10}),f.addLayer({id:'cluster',type:'circle',source:'checkins',filter:['has','point_count'],paint:{"circle-radius":{property:'point_count',stops:[[{zoom:0,value:3},7],[{zoom:0,value:10},10],[{zoom:0,value:100},13],[{zoom:0,value:200},16]]},"circle-color":'#14B7F4',"circle-opacity":.9,"circle-stroke-width":{property:'point_count',stops:[[3,3],[50,6]]},"circle-stroke-color":'#14B7F4',"circle-stroke-opacity":.3}}),f.addLayer({id:'checkins-count',type:'symbol',source:'checkins',filter:['has','point_count'],maxzoom:11,layout:{"text-field":'{point_count_abbreviated}',"text-size":10}}),f.addLayer({id:'checkins',type:'circle',source:'checkins',minzoom:8,filter:['!has','point_count'],paint:{"circle-radius":3,"circle-color":'#14B7F4',"circle-opacity":0.9,"circle-stroke-width":3,"circle-stroke-color":'#14B7F4',"circle-stroke-opacity":0.1}}),f.on('mouseenter','cluster',function(){f.getCanvas().style.cursor='pointer'}),f.on('click','cluster',function(a){f.flyTo({center:a.lngLat,zoom:f.getZoom()+2})}),f.on('mouseleave','cluster',function(){f.getCanvas().style.cursor=''})})})})(document,mapboxgl);

//# sourceMappingURL=app.js.map